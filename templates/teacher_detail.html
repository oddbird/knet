{% extends "base_site.html" %}

{% load markup stories %}

{% block main %}
<article class="teacher-detail">

  {# Teacher Info #}
  <header class="teacher-info">
    <h1 class="teacher-name">{{ teacher }}</h1>

    <ul class="teacher-data">
      {% if teacher.school %}
      <li class=" data-item school">
        <span class="value">{{ teacher.school }}</span>
      </li>
      {% endif %}
      <li class=" data-item membership">
        <b class="type">Network Member Since</b>
        <span class="value">{{ teacher.date_joined|date }}</span>
      </li>
    </ul>
    <div class="teacher-bio">{{ teacher.bio|markdown }}</div>
  </header>

  {# Story Form #}
  {% if user.is_authenticated %}
  <input type="checkbox" id="story-form-toggle" checked/>
  <label for="story-form-toggle" class="toggle-addstory">
    <span class="icon-addstory"></span>
    <span class="text-addstory">
      Tell us how {{ teacher }} changed your life.
    </span>
  </label>

  {% include "_add_story_form.html" %}
  {% endif %}

  {# Stories #}
  <section class="teacher-stories" data-teacher="{{ teacher.user.id }}" data-teacher-name="{{ teacher }}" data-user="{{ user.id }}" data-url="{% if user == teacher.user %}{{ BASE_URL }}{% url 'teacher_detail' username=user.username %}{% endif %}">
    {% for story in teacher|stories_visible_to:user %}
    {% include "_story.html" %}
    {# if empty, msg inserted via js #}
    {% endfor %}
  </section>
</article>
{% endblock %}
