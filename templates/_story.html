{% load markup %}
{% if story.published or teacher == user %}
<article class="story {{ story.published|yesno:'public,private' }}">
  <div class="story-body">
    {{ story.body|markdown }}
  </div>

  <header class="story-info">
    <h1 class="author-name">{{ story.submitter_name }}</h1>
    <time class="pubdate" pubdate>{{ story.created|date:'F j, Y h:i a' }}</time>
  </header>

  {% if user == teacher %}
    <div class="story-actions">
      <form method="POST">
        {% csrf_token %}
        {% if story.published %}
          <button name="hide-story" value="{{ story.id }}" class="story-status lock" title="Make this story private">lock</button>
        {% elif not story.private %}
          <button name="publish-story" value="{{ story.id }}" class="story-status unlock" title="Make this story public">unlock</button>
        {% endif %}
        <button name="delete-story" value="{{ story.id }}" class="delete-story">Delete</button>
      </form>
    </div>
  {% endif %}
</article>
{% endif %}
