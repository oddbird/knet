{% load markup %}
<article class="story {{ story.published|yesno:'public,private' }}">
  <div class="story-body">
    {{ story.body|markdown }}
  </div>

  <header class="story-info">
    <h1 class="author-name">{{ story.submitter_name }}</h1>
    <time class="pubdate" pubdate>{{ story.created|date:'F j, Y h:i a' }}</time>
  </header>

  {% if user == teacher.user %}
    <div class="story-actions">
      <form method="POST">
        {% csrf_token %}
        {% if story.published %}
          <button type="submit" name="hide-story" value="{{ story.id }}" class="story-status lock" title="Make this story private">lock</button>
        {% elif story.private %}
          <p class="story-private-notice" title="This story was marked private by the student.">private</p>
        {% else %}
          <button type="submit" name="publish-story" value="{{ story.id }}" class="story-status unlock" title="Make this story public">unlock</button>
        {% endif %}
        <button type="submit" name="delete-story" value="{{ story.id }}" class="delete-story" title="Delete this story.">Delete</button>
      </form>
    </div>
  {% endif %}
</article>
