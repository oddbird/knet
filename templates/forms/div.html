{% load widget_tweaks form_utils %}

{% with classes=classes|add:" form-value" label=label|default:field.label help_text=help_text|default:field.help_text %}
  <div class="formfield {{ field.html_name }}-field{% if field|optional %} optional{% endif %}{% if field.errors %} errors{% endif %}">
    {% if not errorslast %}
      {% include "forms/errors.html" with errors=field.errors %}
    {% endif %}
    {% if not field|is_checkbox %}{% include "forms/label.html" %}{% endif %}
    {{ field|add_class:classes }}
    {% if field|is_checkbox %}{% include "forms/label.html" %}{% endif %}
    {% if help_text %}<span class="helptext">{{ help_text }}</span>{% endif %}
    {% if errorslast %}
      {% include "forms/errors.html" with errors=field.errors %}
    {% endif %}
  </div>
{% endwith %}
